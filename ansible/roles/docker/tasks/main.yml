---
- name: docker key
  apt_key: keyserver=keyserver.ubuntu.com id=36A1D7869245C8950F966E92D8576A8BA88D21E9
  
- name: docker repo
  apt_repository: repo="deb https://get.docker.com/ubuntu docker main" state=present
  register: docker_repository

- name: apt-get update
  apt: update_cache=yes
  when: docker_repository.changed

- name: install docker
  apt: pkg=lxc-docker state=latest
  
- name: add user to docker group
  user: "name={{ devuser | mandatory }} groups=docker append=yes"

- name: install python pip
  apt: pkg=python-pip state=latest

- name: docker-compose
  pip: name=docker-compose state=latest